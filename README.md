# æœƒå“¡æ¨è–¦ç³»çµ± - ä¸‰ç´šåˆ†æ½¤åˆ¶åº¦

é€™æ˜¯ä¸€å€‹åŸºæ–¼ Next.js å’Œ Supabase çš„å¤šå±¤æ¬¡è¡ŒéŠ·ï¼ˆMLMï¼‰ç³»çµ±ï¼Œå¯¦ç¾ä¸‰ç´šæ¨è–¦åˆ†æ½¤æ©Ÿåˆ¶ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹è‰²

### å‰å°åŠŸèƒ½
- âœ… æœƒå“¡è¨»å†Šï¼ˆå¯é¸æ“‡æ¨è–¦äººï¼‰
- âœ… æœƒå“¡åˆ—è¡¨èˆ‡æŸ¥è©¢
- âœ… å€‹äººå„€è¡¨æ¿
  - æŸ¥çœ‹ç¸½åˆ†æ½¤æ”¶å…¥
  - æŸ¥çœ‹æ‰€æœ‰åˆ†æ½¤ç´€éŒ„
  - æŸ¥çœ‹ä¸‰ä»£ä¸‹ç·šåå–®
- âœ… è‡ªå‹•è¨ˆç®—ä¸‰ç´šåˆ†æ½¤

### å¾Œå°åŠŸèƒ½
- âœ… ç³»çµ±çµ±è¨ˆè³‡è¨Š
  - ç¸½æœƒå“¡æ•¸
  - ç¸½åˆ†æ½¤é‡‘é¡
  - ä»Šæ—¥æ–°å¢æœƒå“¡
  - ä»Šæ—¥åˆ†æ½¤
- âœ… æœƒå“¡ç®¡ç†
- âœ… åˆ†æ½¤ç´€éŒ„æŸ¥è©¢

## ğŸ’° åˆ†æ½¤åˆ¶åº¦

- **ç¬¬ä¸€ä»£ï¼ˆç›´æ¥ä¸‹ç·šï¼‰**: NT$ 150
- **ç¬¬äºŒä»£**: NT$ 100
- **ç¬¬ä¸‰ä»£**: NT$ 50

ç•¶æ–°æœƒå“¡è¨»å†Šæ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•è¿½æº¯ä¸‰ä»£ä¸Šç·šä¸¦å»ºç«‹åˆ†æ½¤ç´€éŒ„ã€‚

## ğŸ—„ï¸ è³‡æ–™åº«çµæ§‹

### 1. usersï¼ˆæœƒå“¡ä¸»è¡¨ï¼‰
```sql
- id: ä½¿ç”¨è€…IDï¼ˆä¸»éµï¼‰
- name: æœƒå“¡åç¨±ï¼ˆå”¯ä¸€ï¼‰
- referrer_id: æ¨è–¦äººIDï¼ˆå¤–éµï¼‰
- created_at: å»ºç«‹æ™‚é–“
```

### 2. commissionsï¼ˆåˆ†æ½¤ç´€éŒ„è¡¨ï¼‰
```sql
- id: ç´€éŒ„IDï¼ˆä¸»éµï¼‰
- user_id: æ”¶å…¥è€…IDï¼ˆå¤–éµï¼‰
- source_id: è§¸ç™¼äº‹ä»¶çš„ä¸‹ç·šIDï¼ˆå¤–éµï¼‰
- level: ç¬¬å¹¾ä»£ (1, 2, 3)
- amount: åˆ†æ½¤é‡‘é¡
- created_at: å»ºç«‹æ™‚é–“
```

### 3. commission_rulesï¼ˆåˆ†æ½¤è¨­å®šè¡¨ï¼‰
```sql
- id: è¦å‰‡IDï¼ˆä¸»éµï¼‰
- level: ä»£æ•¸
- amount: è©²ä»£é‡‘é¡
```

## ğŸš€ å®‰è£èˆ‡è¨­å®š

### 1. å®‰è£ç›¸ä¾å¥—ä»¶
```bash
npm install
```

### 2. è¨­å®š Supabase

å·²ç¶“è¨­å®šå¥½ Supabase é€£ç·šï¼š
- URL: https://tpkkwojypyuzsujizvqp.supabase.co
- ç’°å¢ƒè®Šæ•¸å·²è¨­å®šæ–¼ `.env.local`

### 3. å»ºç«‹è³‡æ–™åº«è¡¨æ ¼

è«‹è‡³ Supabase SQL Editor åŸ·è¡Œ `database/schema.sql` çš„å…§å®¹ï¼š

1. ç™»å…¥ Supabase Dashboard
2. é€²å…¥ SQL Editor
3. è¤‡è£½ä¸¦åŸ·è¡Œ `database/schema.sql` çš„æ‰€æœ‰ SQL æŒ‡ä»¤
4. ç¢ºèªä¸‰å€‹è¡¨æ ¼éƒ½å·²å»ºç«‹æˆåŠŸ

### 4. å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
```bash
npm run dev
```

æ‡‰ç”¨ç¨‹å¼å°‡åœ¨ http://localhost:3000 å•Ÿå‹•

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx                    # é¦–é ï¼ˆæœƒå“¡è¨»å†Šï¼‰
â”‚   â”œâ”€â”€ dashboard/[id]/page.tsx     # æœƒå“¡å„€è¡¨æ¿
â”‚   â”œâ”€â”€ admin/page.tsx              # å¾Œå°ç®¡ç†
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ users/
â”‚       â”‚   â”œâ”€â”€ route.ts            # å–å¾—/å»ºç«‹æœƒå“¡
â”‚       â”‚   â””â”€â”€ [id]/
â”‚       â”‚       â”œâ”€â”€ route.ts        # å–å¾—æœƒå“¡è©³æƒ…
â”‚       â”‚       â”œâ”€â”€ commissions/route.ts  # å–å¾—æœƒå“¡åˆ†æ½¤
â”‚       â”‚       â””â”€â”€ downline/route.ts     # å–å¾—æœƒå“¡ä¸‹ç·š
â”‚       â””â”€â”€ admin/
â”‚           â”œâ”€â”€ stats/route.ts      # å–å¾—çµ±è¨ˆè³‡è¨Š
â”‚           â””â”€â”€ commissions/route.ts # å–å¾—æ‰€æœ‰åˆ†æ½¤
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ db.ts                       # Supabase å®¢æˆ¶ç«¯è¨­å®š
â”‚   â””â”€â”€ types.ts                    # TypeScript å‹åˆ¥å®šç¾©
â””â”€â”€ database/
    â””â”€â”€ schema.sql                  # è³‡æ–™åº«çµæ§‹
```

## ğŸ¨ ä½¿ç”¨æŠ€è¡“

- **å‰ç«¯æ¡†æ¶**: Next.js 16 (App Router)
- **æ¨£å¼**: Tailwind CSS 4
- **è³‡æ–™åº«**: Supabase (PostgreSQL)
- **èªè¨€**: TypeScript
- **ç‹€æ…‹ç®¡ç†**: React Hooks

## ğŸ“– API è·¯ç”±

### æœƒå“¡ç›¸é—œ
- `GET /api/users` - å–å¾—æ‰€æœ‰æœƒå“¡
- `POST /api/users` - è¨»å†Šæ–°æœƒå“¡ï¼ˆè‡ªå‹•è¨ˆç®—åˆ†æ½¤ï¼‰
- `GET /api/users/[id]` - å–å¾—ç‰¹å®šæœƒå“¡è³‡è¨Š
- `GET /api/users/[id]/commissions` - å–å¾—æœƒå“¡åˆ†æ½¤ç´€éŒ„
- `GET /api/users/[id]/downline` - å–å¾—æœƒå“¡ä¸‰ä»£ä¸‹ç·š

### ç®¡ç†ç›¸é—œ
- `GET /api/admin/stats` - å–å¾—ç³»çµ±çµ±è¨ˆ
- `GET /api/admin/commissions` - å–å¾—æ‰€æœ‰åˆ†æ½¤ç´€éŒ„

## ğŸ” æ³¨æ„äº‹é …

1. ç›®å‰æœªå¯¦ä½œèº«ä»½é©—è­‰ï¼Œå¯¦éš›æ‡‰ç”¨éœ€åŠ å…¥ç™»å…¥æ©Ÿåˆ¶
2. å¾Œå°ç®¡ç†æ‡‰åŠ å…¥æ¬Šé™æ§åˆ¶
3. å»ºè­°åœ¨ Supabase è¨­å®š Row Level Security (RLS)
4. ç’°å¢ƒè®Šæ•¸ `.env.local` å·²åŒ…å«å¯¦éš›é‡‘é‘°ï¼Œç”Ÿç”¢ç’°å¢ƒæ‡‰ä½¿ç”¨ç’°å¢ƒè®Šæ•¸

## ğŸ› ï¸ é–‹ç™¼æŒ‡ä»¤

```bash
# é–‹ç™¼æ¨¡å¼
npm run dev

# å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬
npm run build

# å•Ÿå‹•ç”Ÿç”¢ä¼ºæœå™¨
npm start

# ç¨‹å¼ç¢¼æª¢æŸ¥
npm run lint
```

## ğŸ“ å¾…è¾¦äº‹é …

- [ ] å¯¦ä½œæœƒå“¡ç™»å…¥/è¨»å†Šç³»çµ±
- [ ] åŠ å…¥ç®¡ç†å“¡æ¬Šé™æ§åˆ¶
- [ ] å¯¦ä½œæœƒå“¡è³‡æ–™ç·¨è¼¯åŠŸèƒ½
- [ ] åŠ å…¥åˆ†æ½¤çµ±è¨ˆåœ–è¡¨
- [ ] åŒ¯å‡ºåˆ†æ½¤å ±è¡¨ï¼ˆCSV/Excelï¼‰
- [ ] å¯¦ä½œæ¨è–¦é€£çµç”Ÿæˆ
- [ ] åŠ å…¥ Email é€šçŸ¥åŠŸèƒ½

